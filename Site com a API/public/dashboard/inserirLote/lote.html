<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styleLote.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <title>Lote | Diwine</title>
</head>

<body onload="listar()">
  <div class="sideBar">
    <ul class="menu">

      <div class="top-icon">
        <li class="active">
          <a href="../paginaInicial/dashboardInicial.html" class="menuIcon">
            <i class="fas fa-bars active"></i></a>
        </li> <!-- active -->

        <li class="temperatura">
          <a href="../dashboard_temp/dashteste.html" class="temperaturaIcon">
            <i class="fas fa-temperature-three-quarters"></i></a>
        </li> <!-- temperatura -->

        <li class="umidade">
          <a href="../dashboard_umi/dashboardUmi.html" class="umidadeIcon">
            <i class="fas fa-droplet"></i></a>
        </li> <!-- umidade -->

        <li class="lote">
          <a href="#" class="loteIcon">
            <i class="fas fa-wine-bottle"></i></a>
        </li> <!-- lote -->
      </div> <!-- top-icon -->

      <div class="bottom-icon">
        <div class="space"></div> <!-- space -->

        <li class="logout">
          <a href="../../login.html" class="logoutIcon">
            <i class="fas fa-right-from-bracket"></i></a>
        </li> <!-- logout -->

        <li class="question">
          <a href="https://diwine.atlassian.net/servicedesk/customer/portal/1" class="logoutIcon">
            <i class="fa-solid fa-question"></i></a>
        </li> <!-- logout -->

        <li class="perfil">
          <a href="../perfilUsuario/Perfil_Usuario.html" class="perfilIcon">
            <i class="fas fa-circle-user"></i></a>
        </li> <!-- perfil -->
      </div><!-- bottom-icon -->
    </ul> <!-- menu -->
  </div> <!-- sidebar -->

  <div class="container">
    <div class="exibir-lote">
      <div class="title-lote">
        <h1 class="title-id">ID: 0101002 </h1>
        <h1 class="title-ambiente">SETOR 1 - VINHO BRANCO</h1>
      </div> <!-- title-lote -->

      <div class="content-lote" id="containerLote">
        

      </div> <!-- content-lote -->
    </div> <!-- exibir-lote -->


    <div class="inserir-lote">
      <div class="acesso-inserir">
        <a href="inserirLote.html"><i class="fa-solid fa-plus"></i>INSERIR LOTE</a>
      </div> <!-- /.acesso-inserir -->

      <div class="info-inserir">
        <div class="info-tipoBarril">
          <h1 class="info-inserir-lote">Tipo do Barril</h1>
          <h1 class="info-inserir-lote red">Madeira de Carvalho</h1>
        </div><!-- info-tipoBarril -->

        <div class="info-tipoBarril">
          <h1 class="info-inserir-lote">Tempo de Atualização</h1>
          <h1 class="info-inserir-lote red">30 minutos</h1>
        </div><!-- info-tipoBarril -->
      </div> <!-- info-inserir -->
    </div> <!-- inserir-lote -->
    <div> <!-- container -->
</body>

</html>

<script>
   function listar() {
    fetch("/lotes/listar", {
      method: "GET",
    })
      .then(function (resposta) {
        resposta.json().then((lotes) => {
          lotes.forEach((lote) => {
            
            var data = new Date(lote.dataIncio);

            var dia = data.getDate();
            var mes = data.getMonth() + 1;
            var ano = data.getFullYear();
            


            containerLote.innerHTML += `
            <div class="info-lote">
                <h1 class="info-content-lote grey">ID:${lote.idLote}</h1>
                <h1 class="info-content-lote"><span>APELIDO:</span>${lote.apelido}</h1>
                <h1 class="info-content-lote"><span>TIPO:</span>${lote.tipoVinho}</h1>
                <h1 class="info-content-lote"><span>TEMPO DA MATURAÇÃO:</span>${lote.tempoMes}/${lote.tempoAno}</h1>
                <h1 class="info-content-lote"><span>DESDE:</span>${dia}/${mes}/${ano}</h1>
            </div>
            `;
          });
        });
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });
  }

  function sumirMensagem() {
    cardErro.style.display = "none";
      
}
</script>